{% extends 'base.html' %}
{% load static %}

{% block title %}
{{project.name}}
{% endblock %}


{% block content %}

<div id="projectsquaremanage1">
    <a href="{% url 'projects:index' %}" style="text-decoration: none;"><img src="{% static 'images/back.png' %}"></a>
    <h1 class="ms-3" style="text-align: center; font-size: 40pt;"> {{project.name}}</h1>
    
    <p>Project Description :</p>
    <table class="tableproject">
            
        <tr background-color: white;>
            <th rowspan="4">
                <div id="projectsquaremanage2">
                    {{project.description}}
                </div>
            </th>
            <th>Timeline :</th>
            <th>Project Size :</th>
        </tr>
        <tr>
            <th><div id="projectsquare3" style="background-color: red;">{{ project.start_date|date:'d M' }} - {{ project.end_date|date:'d M Y' }}</div></th>
            <th><div id="projectsquare3" style="background-color: green;">{{ project.size }}</div></th>
        </tr>
        <tr>
            <th>Project Leader :</th>
            <th>Last Updated :</th>
        </tr>
        <tr>
            <th><div id="projectsquare3" style="background-color: blue;">{{ project.user.username }}</div></th>
            <th><div id="projectsquare3" style="background-color: darkorange;">2 days ago</div></th>
        </tr>
    </table>
    <br>
    <div class="navbarproject">
        <a id = "one" style="text-decoration: underline;" onclick="satu()">
            Project Tasks
        </a>
        <a id = "two" onclick="dua()"> 
            Raw Material
        </a>
        <a id = "three" onclick="tiga()"> 
            Gantt Chart 
        </a>
        {% if project.user == request.user or request.user.is_superuser == 1 %}
            <button class="button3table" id="newtaskbtn" onclick="addnewtask()" style="display: block;" data-bs-toggle="modal" data-bs-target="#newtask">Add new task</button>
            <button class="button3table" id="newmaterialbtn" onclick="addnewmaterial()" style="display: none;" data-bs-toggle="modal" data-bs-target="#newmaterial">Add new material</button>
            <button class="button3table" id="excelbtn" onclick="converttoexcel()" style="display: none;">Convert to Excel</button>
        {% endif %}
    </div>
    <br>
    <div class="accordion" id="projecttasks" style="display: block;">
        <table class="tableprojectsatuan">
            <tr>
                <th style="text-align: center;">Task name</th>
                <th style="text-align: center;">Timeline</th>
                <th style="text-align: center;">Priority</th>
                <th style="text-align: center;">Overall Status</th>
                <th style="text-align: center;">Last Updated at</th>
                <th style="text-align: center;">Details</th>
            </tr>
            <tr>
                <td class="text-center">task name</td>
                <td><div id="projectsquare3" style="background-color: red; text-align: center;">27 Feb - 04 Mar 2022</div></td>
                <td><div id="projectsquare3" style="background-color: green; text-align: center;">High</div></td>
                <td><div id="projectsquare3" style="background-color: darkorange; text-align: center;">Done</div></td>
                <td><div id="projectsquare3" style="background-color: red; text-align: center;">30 Mar 2022</div></td>
                <td><a href="#" data-bs-toggle="collapse" data-bs-target="#subtask1" aria-expanded="false" aria-controls="collapseOne"><img src="{% static 'images/panahbawah.png' %}" style="display: block; margin: 0 auto;"></a></td>
            </tr>
            {% for comment in project.comment_set.all %}
                <tr>
                    <td>{{project.description}}</td>
                    <td><div id="projectsquare3" style="background-color: red; text-align: center;">27 Feb - 04 Mar 2022</div></td>
                    <td><div id="projectsquare3" style="background-color: green; text-align: center;">High</div></td>
                    <td><div id="projectsquare3" style="background-color: darkorange; text-align: center;">Done</div></td>
                    <td><div id="projectsquare3" style="background-color: red; text-align: center;">{{comment.created_at}}</div></td>
                    <td><a href="{% url 'projects:comment-edit' comment.id %}"><img src="{% static 'images/panahbawah.png' %}" style="display: block; margin: 0 auto;"></a></td>
                </tr>
            {% endfor %}
            </table>
            {% comment %} Subtasks {% endcomment %}
            <div id="subtask1" class="projectsquaremanage1 accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#projecttasks">
                <table class="tableprojectsatuansubtask">
                    <tr>
                    <th style="text-align: center;">Subtask name</th>
                    <th style="text-align: center;">Timeline</th>
                    <th style="text-align: center;">Status</th>
                    <th style="text-align: center;">Last Updated</th>
                    </tr>
                    <tr>
                        <td class="text-center">Subtask 1</td>
                        <td class="text-center">27 Feb - 04 Mar 2022</td>
                        <td class="text-center">Done</td>
                        <td class="text-center">27 Maret 2022</td>
                    </tr>
                </table>
            </div>
            {% comment %} -----------------Subtasks-------------------- {% endcomment %}
    </div>
    <div id="rawmaterial" style="display: none;">
        <table class="tableprojectsatuan">
            <tr>
                <th style="text-align: center;">Material name</th>
                <th style="text-align: center;">Priority</th>
                <th style="text-align: center;">Added at</th>
                <th style="text-align: center;">Added by</th>
            </tr>
            {% comment %} {% for comment in project.comment_set.all %}
                <tr>
                    <td>{{comment.desc}}</td>
                    <td><div id="projectsquare3" style="background-color: darkorange; text-align: center;">High</div></td>
                    <td><div id="projectsquare3" style="background-color: red; text-align: center;">{{comment.created_at}}</div></td>
                    <td><div id="projectsquare3" style="background-color: red; text-align: center;">{{comment.user}}</div></td>
                </tr>
            {% endfor %} {% endcomment %}
            </table>
    </div>
    <div id="ganttchart" style="display: none;">
        
    </div>
</div>

    <!-- Modal Task-->
    <div class="modal fade" id="newtask" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add a Task</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="task-name" class="col-form-label">Task Name: </label>
                            <input type="text" class="form-control" id="task-name">
                        </div>
                        <div class="form-group">
                            <label for="message-text" class="col-form-label">Project Priority: </label>
                            <select class="form-control" id="task-priority">
                                <option>High</option>
                                <option>Medium</option>
                                <option>Low</option>
                            </select>
                        </div>
                        <div class="mb-3 row">
                            <div class="col-md-6">
                                <label for="start-date" class="col-form-label">Start Date: </label>
                                <input type="date" class="form-control" id="start-date" name="start-date">
                            </div>
                            <div class="col-md-6">
                                <label for="end-date" class="col-form-label">End Date: </label>
                                <input type="date" class="form-control" id="end-date" name="end-date">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Add New Task</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Material-->
    <div class="modal fade" id="newmaterial" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add a Material</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="task-name" class="col-form-label">Material Name: </label>
                            <input type="text" class="form-control" id="task-name">
                        </div>
                        <div class="form-group">
                            <label for="message-text" class="col-form-label">Material Priority: </label>
                            <select class="form-control" id="task-priority">
                                <option>High</option>
                                <option>Medium</option>
                                <option>Low</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Add New Material</button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

